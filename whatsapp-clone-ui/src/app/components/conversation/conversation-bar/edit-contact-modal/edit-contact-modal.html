<div class="d-flex flex-column justify-content-center text-white rounded-3">
  <form #contactForm="ngForm" (ngSubmit)="updateUserContact(contactForm)">
    <div class="p-4">
      <div class="d-flex flex-column align-items-start">
        <h5 class="fw-bold fs-3 mb-4">
          @if (isSelfChat()) {
            Edit My Details
          } @else {
            Edit contact
          }
        </h5>
      </div>

      <div class="text-center mb-4">
        <div class="rounded-circle bg-secondary d-flex justify-content-center align-items-center mx-auto"
             style="width: 100px; height: 100px;">
          <input type="file" id="groupIconInput" accept="image/*" hidden (change)="onFileSelected($event)">
          <label for="groupIconInput"
                 class="btn btn-outline-secondary rounded-circle d-flex align-items-center justify-content-center p-0 overflow-hidden"
                 style="width: 100px; height: 100px; cursor: pointer;">
            @if (previewUrl) {
              <img [src]="previewUrl" alt="profile-photo" class="w-100 h-100 object-fit-cover" />
            } @else if (!chatUser.imageFileReference) {
              <fa-icon [icon]="'user'" size="3x"></fa-icon>
            } @else {
              <img [src]="chatUser.imageFileReference | mediaUrl: true | async" alt="profile-photo" class="w-100 h-100 object-fit-cover" />
            }
          </label>
        </div>
      </div>

      <div class="mb-3">
        <label for="email" class="form-label subtitle mb-0">Email address</label>
        <span class="form-control">{{ chatUser.email }}</span>
      </div>

      <div class="mb-3">
        <label for="firstName" class="form-label subtitle mb-0">First name</label>
        <input type="text" class="form-control bg-dark text-white border-secondary" id="firstName"
               name="firstName" [(ngModel)]="chatUser.firstname">
      </div>

      <div class="mb-4">
        <label for="lastName" class="form-label subtitle mb-0">Last name</label>
        <input type="text" class="form-control bg-dark text-white border-secondary" id="lastName"
               name="lastName" [(ngModel)]="chatUser.lastname">
      </div>

      @if (isSelfChat()) {
        <div class="mb-4">
          <label for="description" class="form-label subtitle mb-0">Description</label>
          <input type="text" class="form-control bg-dark text-white border-secondary" id="description"
                 name="description" [(ngModel)]="chatUser.description">
        </div>
      }

      <div class="d-flex align-items-center justify-content-between mb-4">
        <div>
          <label class="form-check-label mb-0" for="syncContact">Sync contact to phone</label>
          <div class="small text-muted">This contact will be added to your phoneâ€™s address book.</div>
        </div>
        <div class="form-check form-switch fs-3 m-0">
          <input class="form-check-input" type="checkbox" id="syncContact" checked>
        </div>
      </div>
    </div>
    <div class="d-flex justify-content-end bg-black w-100 p-4 gap-2">
      <button type="submit" class="btn btn-primary rounded-1 w-50"
        [disabled]="!contactForm.valid">Save</button>
      <button type="button" class="btn btn-secondary rounded-1 w-50"
        (click)="closeModal()">Cancel</button>
    </div>
  </form>
</div>
