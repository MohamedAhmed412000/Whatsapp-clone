<div id="content">
  <div class="py-4 pb-2 d-flex flex-column justify-content-end" id="header">
    <div class="d-flex justify-content-start align-items-center mb-1">
      <fa-icon icon="arrow-left" (click)="onCloseNav()" class="mx-4" id="close"></fa-icon>
      <div class="title">New chat</div>
    </div>
  </div>
  <div id="main" class="d-flex flex-column align-items-center">
    <input [ngModel]="query" (ngModelChange)="onQueryChange($event)"
      class="form-control w-75 my-4" type="text" placeholder="Search name">
    <div class="d-flex flex-column w-100">
      <div class="d-flex flex-column w-100">
        <app-action-creator
          [title]="'New group'"
          [icon]="'user-group'"
          [action]="openNewGroupChat"
        ></app-action-creator>
      </div>
      <div class="d-flex flex-column w-100">
        <app-action-creator
          [title]="'New contact'"
          [icon]="'user'"
          [action]="openNewContactModal.bind(this)"
        ></app-action-creator>
      </div>
      <div class="d-flex flex-column w-100">
        <app-conversation-selector
          [user]="meUser!"
          [subtitle]="'Message yourself'"
          [pictureReference]="meUser?.profilePictureReference!"
          (userChatSelected)="handleConversation(meUser)"
        ></app-conversation-selector>
      </div>
    </div>
    <span class="align-self-start ms-4 pt-4 pb-3 subtitle">All contacts</span>
    <div class="d-flex flex-column w-100 overflow-y-auto">
      @for (user of usersResponses; track user.id) {
        <app-conversation-selector
          [user]="user"
          [subtitle]="'Hi I\'m using Whatsapp clone'"
          [pictureReference]="user.profilePictureReference!"
          (userChatSelected)="handleConversation(user)"
        ></app-conversation-selector>
      }
    </div>
    @if (usersResponses.length === 0 && !loadingSearch) {
      <div class="d-flex flex-column vh-100 align-items-center justify-content-center">
        <div class="fs-3">
            No result found
        </div>
      </div>
    }
    @if (loadingSearch) {
      <div class="d-flex flex-column vh-100 align-items-center justify-content-center">
        <div class="spinner-grow text-primary" role="status">
          <span class="visually-hidden">Loading...</span>
        </div>
      </div>
    }
  </div>
</div>
